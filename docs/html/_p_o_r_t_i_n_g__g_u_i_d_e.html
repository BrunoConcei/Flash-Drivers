<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.14"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Adesto Flash Drivers: Porting Guide</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><a href="https://www.adestotech.com/"><img alt="Logo" src="logo.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname"><a href=index.html style="color:black">Adesto Flash Drivers
   </div>
   <div id="projectbrief">Sample SPI drivers for a number of the Adesto Technologies flash devices.</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part --><!-- Generated by Doxygen 1.8.14 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">Porting Guide </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>Porting this project to a specific MCU involves declaring the ports and pins connected to the flash device, defining various functions tied to the SPI layer, and declaring the flash device used. The guide is broken into sections addressing each of these steps. Once they have been completed, the Adesto layer should be fully functional.</p>
<h1><a class="anchor" id="PORTS_AND_PINS"></a>
Ports and Pins</h1>
<p>The port and pin numbers used in this project must be defined based on the MCU and board being used. The definitions should be placed in <a class="el" href="user__config_8h.html" title="Project declarations exist here. ">user_config.h</a>. The port and pin information is used when initializing and toggling the GPIO pins, and these 2 identiffiers should be all that's needed. The port/pins that need defining are as follows:</p><ol type="1">
<li><a class="el" href="user__config_8h.html#a1678acc83b89635797c577980225e72f">SPI_CSB_PORT</a></li>
<li><a class="el" href="user__config_8h.html#ae6395328cc97808bed84e09897a2baf0">SPI_CSB_PIN</a></li>
<li><a class="el" href="user__config_8h.html#ade902845feb9681f6550117ba7aefbf0">SPI_TRIGGER_PORT</a></li>
<li><a class="el" href="user__config_8h.html#ad0da7cf15f73baef40e165338ab29c2a">SPI_TRIGGER_PIN</a></li>
<li><a class="el" href="user__config_8h.html#a6f9b7e59b3a2efdc061e0c886c80e068">SPI_SCK_PORT</a></li>
<li><a class="el" href="user__config_8h.html#aee89f642bb559e12db93e9f412ea185e">SPI_SCK_PIN</a></li>
<li><a class="el" href="user__config_8h.html#ae524a02b21071c5529918a33e35e846b">SPI_MOSI_PORT</a></li>
<li><a class="el" href="user__config_8h.html#a67d2c0b6e0ecbd0351958756e4830172">SPI_MOSI_PIN</a></li>
<li><a class="el" href="user__config_8h.html#a28f80193fbde762d8b7f896aa393deb6">SPI_MISO_PORT</a></li>
<li><a class="el" href="user__config_8h.html#a315722498711fce1e1aa6ea6654385cf">SPI_MISO_PIN</a></li>
<li><a class="el" href="user__config_8h.html#a3b05d215ec24c6a73edb2152fd5e36ea">SPI_WPB_PORT</a></li>
<li><a class="el" href="user__config_8h.html#a1fe60e7ed263fb0a42cf331107c96fe3">SPI_WPB_PIN</a></li>
<li><a class="el" href="user__config_8h.html#a4d07b309569186a05034ad516d5c43f1">SPI_HOLDB_PORT</a></li>
<li><a class="el" href="user__config_8h.html#a4a1f6b114a23d4672d3658ee5c5d1ea5">SPI_HOLDB_PIN</a></li>
</ol>
<p>The port should be an address, while the pin should be a uint32_t type, although the user may implement the functions that use these data types differently. See the following section to see how these port and pin numbers are used.</p>
<h1><a class="anchor" id="SPI_USER_FUNCTIONS"></a>
SPI User Defined Functions</h1>
<p>The user must also define 4 functions within the SPI layer listed below:</p><ol type="1">
<li><a class="el" href="user__config_8c.html#a65c65ef7e9eda8776c31fbb1e5e28a3f" title="Initializes a given pin as either an input or output. When porting, this function must be redefined...">USER_CONFIG_PinInit()</a></li>
<li><a class="el" href="user__config_8c.html#ac6e2d7b6f6336fac7cd0100fcab01d50" title="Clears a given pin on a port to LOW. ">USER_CONFIG_PinClear()</a></li>
<li><a class="el" href="user__config_8c.html#a0dc12ee98be5fcddf7a30617a687a9b2" title="Sets a given pin on a port to HIGH. ">USER_CONFIG_PinSet()</a></li>
<li><a class="el" href="user__config_8c.html#a86888c8f5d2418b332e12c8988dca2d7" title="Reads the voltage on a given pin. ">USER_CONFIG_PinRead()</a></li>
<li><a class="el" href="user__config_8c.html#ab12365a59df355fd84d6634a736a7657" title="Configures the board for program usage. Initializes the requisite ports/pins for use as GPIOs...">USER_CONFIG_BoardInit()</a> <br />
 As the names imply, these functions are the hooks to a GPIO driver specific to the MCU being used. The functions must initialize a pin on single port as either an input or an output, and set the level. The documentation for the functions describe their behaviour and should be referenced when redefining them.</li>
</ol>
<h1><a class="anchor" id="FLASH_DEVICE"></a>
Flash Device Selected</h1>
<p>While the SPI layer bit-banged driver is built to cover the full range of Adesto SPI flash products, the Adesto layer is meant to be general purpose within a given family. Almost all features are declared/defined. As such, some functionality may not be supported on a device within a certain family. To differentiate between devices in the general Adesto layer, conditional compilation 'locks' and 'unlocks' the opcodes and related functions. Before using the driver a user must specify the flash device being used in <a class="el" href="user__config_8h.html" title="Project declarations exist here. ">user_config.h</a> with <a class="el" href="user__config_8h.html#ad3d408f91c72c3fed79cc52eb8d781fd">PARTNO</a>, a list of which can be seen within the comments of that file. (EX: '#define PARTNO AT45DB041E'). </p>
</div></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
<!-- Generated by &#160;<a href="https://www.adestotech.com/"> -->
	<a href="https://www.adestotech.com/">
	Clear BSD License Copyright Â©2018 Adesto Technologies Corporation, Inc. All rights reserved.
</small></address>
</body>
</html>