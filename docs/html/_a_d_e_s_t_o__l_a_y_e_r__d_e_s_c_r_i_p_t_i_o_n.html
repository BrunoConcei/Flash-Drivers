<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.14"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Adesto Flash Drivers: Adesto Layer</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="doxygen_html_style.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><a href="https://www.adestotech.com/"><img alt="Logo" src="logo.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname"><a href=https://github.com/adestotechnologies/Flash-Drivers style="color:black">Adesto Flash Drivers
   </div>
   <div id="projectbrief">Sample SPI drivers for a number of the Adesto Technologies flash devices.</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part --><!-- Generated by Doxygen 1.8.14 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">Adesto Layer </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>The Adesto layer is flash device/family specific. Each family of devices (i.e. Dataflash) has its own header, c file, and a set of opcodes defined in <a class="el" href="cmd__defs_8h.html" title="Definitions for opcodes. ">cmd_defs.h</a>. Most commands available to each device have been declared and defined, and each has been commented. In addition, a sample sequence presented as a 'test' of the flash device can be found within the c files for each family. The 'test' runs through a sequence of events and showcases how to use the driver and commands.<br />
</p>
<p>All Adesto layer functions have 2 core elements; load a buffer with data, then communicate with the flash device via the bit-banged SPI driver.<br />
<br />
 Loading a buffer:</p><div class="fragment"><div class="line"><a class="code" href="fusion_8c.html#adf8e0d69cd6a9654ced3e033003c482e">txFusionInternalBuffer</a>[0] = <a class="code" href="cmd__defs_8h.html#a0574cb3399692b6611ffef02470c628a">CMD_FUSION_WRITE_SRB2</a>; </div></div><!-- fragment --><p> Transmitting via the SPI driver:</p><div class="fragment"><div class="line"><a class="code" href="spi__driver_8c.html#a16fbd6043228ac91a69a5303e51499e5">SPI_Exchange</a>(<a class="code" href="fusion_8c.html#adf8e0d69cd6a9654ced3e033003c482e">txFusionInternalBuffer</a>, 2, NULL, 0, 0); </div></div><!-- fragment --><p> Options for printing the received and transmitted bytes (available as a debug tool within the code) are built on top of these features, along with certain conditionals for complex commands. A few functions (ex: <a class="el" href="phoenix_8c.html#a7d450199b5eceac3a4afc6ae9f7d2e65" title=": Wait while Read/Busy Status bit in SRB is 1 (device is busy). This is accomplished by reading the f...">phoenixWaitOnReady()</a>), can be found within each family which are clearly derived from simpler base functions. These functions are helpful for programming and showcase how other functions can be put together to form a 'complex' sequence of commands.<br />
</p>
<p>A near comprehensive list of supported opcodes can be found in <a class="el" href="cmd__defs_8h.html" title="Definitions for opcodes. ">cmd_defs.h</a>. The datasheet should still be consulted before using a flash device. The sample code is not intended as a be-all-end-all resource, rather it provides a point of reference for starting out with serial communication between an MCU and Adesto flash memory. Indeed, when tested on certain microcontrollers, the measured bit-banged SPI clock rate when running through a test program was lower than 1MHz, less than ideal for high speed applications.<br />
</p>
<p>Included with each layer is a test function which shows the user how to call the various functions, how to switch between various modes when relevant, and programming examples. See <a class="el" href="phoenix_8c.html#a6837ba7fd66074e66a60b4d754ea6582" title="Sample use of the driver for a Phoenix device.   This function is meant to showcase how the API is to...">phoenixTest()</a>, <a class="el" href="moneta_8c.html#abd5f22c0f2897309187481cd3ad732ff" title="Sample use of the driver for a Moneta device.   This function is meant to showcase how the API is use...">monetaTest()</a>, <a class="el" href="dataflash_8c.html#a58e3a2dae25ef029e297e80d8fcee9fa" title="Sample use of the driver for a Dataflash device.   This function is meant to showcase how the API is ...">dataflashTest()</a>, and <a class="el" href="fusion_8c.html#a72975b646efc378432bfa6c02b6a9db5" title="Sample use of the driver for a Fusion device.   This function is meant to showcase how the API is to ...">fusionTest()</a>. If one has the driver properly set up (see <a class="el" href="_u_s_e_r__c_o_n_f_i_g_u_r_a_t_i_o_n__d_e_s_c_r_i_p_t_i_o_n.html">User Configuration</a>), these functions calls will run a testbench that should have 0 errors after completion.</p>
<h1><a class="anchor" id="ADESTO_LAYER_LINKS"></a>
File Links</h1>
<h2><a class="anchor" id="ADESTO_LAYER_FILES"></a>
Adesto Layer Files</h2>
<p><a class="el" href="group___a_d_e_s_t_o___l_a_y_e_r.html">Adesto Layer</a> </p>
<h2><a class="anchor" id="familySpecific"></a>
Family Specific Files</h2>
<p><a class="el" href="group___p_h_o_e_n_i_x.html">Phoenix</a> <br />
 <a class="el" href="group___m_o_n_e_t_a.html">Moneta</a> <br />
 <a class="el" href="group___d_a_t_a_f_l_a_s_h.html">Dataflash</a> <br />
 <a class="el" href="group___f_u_s_i_o_n.html">Fusion</a> <br />
 </p>
</div></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
<!-- Generated by &#160;<a href="https://www.adestotech.com/"> -->
	<a href=license.html>
	Clear BSD License Copyright Â©2018 Adesto Technologies Corporation, Inc. All rights reserved.
</small></address>
</body>
</html>